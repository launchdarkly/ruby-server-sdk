<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: LaunchDarkly::Impl::DataStore::StatusProviderV2
  
    &mdash; LaunchDarkly Ruby SDK
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "LaunchDarkly::Impl::DataStore::StatusProviderV2";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../DataStore.html" title="LaunchDarkly::Impl::DataStore (module)">DataStore</a></span></span>
     &raquo; 
    <span class="title">StatusProviderV2</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: LaunchDarkly::Impl::DataStore::StatusProviderV2
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">LaunchDarkly::Impl::DataStore::StatusProviderV2</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Forwardable</dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html" title="LaunchDarkly::Interfaces::DataStore::StatusProvider (module)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ldclient-rb/impl/data_store/status_provider.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>
<p>StatusProviderV2 is the FDv2-specific implementation of <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html" title="LaunchDarkly::Interfaces::DataStore::StatusProvider (module)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.5.0</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_listener-instance_method" title="#add_listener (instance method)">#<strong>add_listener</strong>(listener)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html#add_listener-instance_method" title="LaunchDarkly::Interfaces::DataStore::StatusProvider#add_listener (method)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Subscribes for notifications of status changes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(store, status_broadcaster)  &#x21d2; StatusProviderV2 </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Initialize the status provider.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#monitoring_enabled%3F-instance_method" title="#monitoring_enabled? (instance method)">#<strong>monitoring_enabled?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Indicates whether the current data store implementation supports status monitoring.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_listener-instance_method" title="#remove_listener (instance method)">#<strong>remove_listener</strong>(listener)  &#x21d2; Object </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html#remove_listener-instance_method" title="LaunchDarkly::Interfaces::DataStore::StatusProvider#remove_listener (method)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unsubscribes from notifications of status changes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>  &#x21d2; Status </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Returns the current status of the store.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_status-instance_method" title="#update_status (instance method)">#<strong>update_status</strong>(status)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Reports a change in the data store&#39;s operational status.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(store, status_broadcaster)  &#x21d2; <tt><span class='object_link'><a href="" title="LaunchDarkly::Impl::DataStore::StatusProviderV2 (class)">StatusProviderV2</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Initialize the status provider.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>store</span>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The feature store (may be nil for in-memory only)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status_broadcaster</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Broadcaster.html" title="LaunchDarkly::Impl::Broadcaster (class)">LaunchDarkly::Impl::Broadcaster</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Broadcaster for status changes</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/impl/data_store/status_provider.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_store'>store</span><span class='comma'>,</span> <span class='id identifier rubyid_status_broadcaster'>status_broadcaster</span><span class='rparen'>)</span>
  <span class='ivar'>@store</span> <span class='op'>=</span> <span class='id identifier rubyid_store'>store</span>
  <span class='ivar'>@status_broadcaster</span> <span class='op'>=</span> <span class='id identifier rubyid_status_broadcaster'>status_broadcaster</span>
  <span class='ivar'>@lock</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ReadWriteLock</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces.html" title="LaunchDarkly::Interfaces (module)">Interfaces</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces/DataStore.html" title="LaunchDarkly::Interfaces::DataStore (module)">DataStore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces/DataStore/Status.html" title="LaunchDarkly::Interfaces::DataStore::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Interfaces/DataStore/Status.html#initialize-instance_method" title="LaunchDarkly::Interfaces::DataStore::Status#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@monitoring_enabled</span> <span class='op'>=</span> <span class='id identifier rubyid_store_supports_monitoring?'>store_supports_monitoring?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_listener-instance_method">
  
    #<strong>add_listener</strong>(listener)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html#add_listener-instance_method" title="LaunchDarkly::Interfaces::DataStore::StatusProvider#add_listener (method)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Subscribes for notifications of status changes.</p>

<p>Applications may wish to know if there is an outage in a persistent data store, since that could mean that
flag evaluations are unable to get the flag data from the store (unless it is currently cached) and therefore
might return default values.</p>

<p>If the SDK receives an exception while trying to query or update the data store, then it notifies listeners
that the store appears to be offline (<span class='object_link'><a href="../../Interfaces/DataStore/Status.html#available-instance_method" title="LaunchDarkly::Interfaces::DataStore::Status#available (method)">LaunchDarkly::Interfaces::DataStore::Status#available</a></span> is false) and begins polling the store
at intervals until a query succeeds. Once it succeeds, it notifies listeners again with <span class='object_link'><a href="../../Interfaces/DataStore/Status.html#available-instance_method" title="LaunchDarkly::Interfaces::DataStore::Status#available (method)">LaunchDarkly::Interfaces::DataStore::Status#available</a></span>
set to true.</p>

<p>This method has no effect if the data store implementation does not support status tracking, such as if you
are using the default in-memory store rather than a persistent store.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>listener</span>
      
      
        <span class='type'>(<tt>#update</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the listener to add</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="monitoring_enabled?-instance_method">
  
    #<strong>monitoring_enabled?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Indicates whether the current data store implementation supports status monitoring.</p>

<p>This is normally true for all persistent data stores, and false for the default in-memory store. A true value
means that any listeners added with <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html#add_listener-instance_method" title="LaunchDarkly::Interfaces::DataStore::StatusProvider#add_listener (method)">LaunchDarkly::Interfaces::DataStore::StatusProvider#add_listener</a></span> can expect to be notified if there is any error in
storing data, and then notified again when the error condition is resolved. A false value means that the
status is not meaningful and listeners should not expect to be notified.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if status monitoring is enabled</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/impl/data_store/status_provider.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_monitoring_enabled?'>monitoring_enabled?</span>
  <span class='ivar'>@monitoring_enabled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_listener-instance_method">
  
    #<strong>remove_listener</strong>(listener)  &#x21d2; <tt>Object</tt> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="../../Interfaces/DataStore/StatusProvider.html#remove_listener-instance_method" title="LaunchDarkly::Interfaces::DataStore::StatusProvider#remove_listener (method)">LaunchDarkly::Interfaces::DataStore::StatusProvider</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Unsubscribes from notifications of status changes.</p>

<p>This method has no effect if the data store implementation does not support status tracking, such as if you
are using the default in-memory store rather than a persistent store.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>listener</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the listener to remove; if no such listener was added, this does nothing</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    #<strong>status</strong>  &#x21d2; <tt>Status</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the current status of the store.</p>

<p>This is only meaningful for persistent stores, or any custom data store implementation that makes use of
the status reporting mechanism provided by the SDK. For the default in-memory store, the status will always
be reported as &quot;available&quot;.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Status</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the latest status</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/impl/data_store/status_provider.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span>
  <span class='ivar'>@lock</span><span class='period'>.</span><span class='id identifier rubyid_with_read_lock'>with_read_lock</span> <span class='kw'>do</span>
    <span class='const'><span class='object_link'><a href="../../../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces.html" title="LaunchDarkly::Interfaces (module)">Interfaces</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces/DataStore.html" title="LaunchDarkly::Interfaces::DataStore (module)">DataStore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Interfaces/DataStore/Status.html" title="LaunchDarkly::Interfaces::DataStore::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../../Interfaces/DataStore/Status.html#initialize-instance_method" title="LaunchDarkly::Interfaces::DataStore::Status#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_available'>available</span><span class='comma'>,</span> <span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_stale'>stale</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_status-instance_method">
  
    #<strong>update_status</strong>(status)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Reports a change in the data store&#39;s operational status.</p>

<p>This is what makes the status monitoring mechanisms in <span class='object_link'><a href="StatusProvider.html" title="LaunchDarkly::Impl::DataStore::StatusProvider (class)">LaunchDarkly::Impl::DataStore::StatusProvider</a></span> work.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>Status</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the updated status properties</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/impl/data_store/status_provider.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_status'>update_status</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='ivar'>@lock</span><span class='period'>.</span><span class='id identifier rubyid_with_write_lock'>with_write_lock</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_available'>available</span> <span class='op'>!=</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_available'>available</span> <span class='op'>||</span> <span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_stale'>stale</span> <span class='op'>!=</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_stale'>stale</span>
      <span class='ivar'>@status</span> <span class='op'>=</span> <span class='id identifier rubyid_status'>status</span>
      <span class='id identifier rubyid_modified'>modified</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@status_broadcaster</span><span class='period'>.</span><span class='id identifier rubyid_broadcast'>broadcast</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_modified'>modified</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jan 30 22:48:08 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.2.10).
</div>

    </div>
  </body>
</html>