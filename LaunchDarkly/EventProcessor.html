<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: LaunchDarkly::EventProcessor
  
    &mdash; LaunchDarkly Ruby SDK
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "LaunchDarkly::EventProcessor";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span>
     &raquo; 
    <span class="title">EventProcessor</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: LaunchDarkly::EventProcessor
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">LaunchDarkly::EventProcessor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="EventProcessorMethods.html" title="LaunchDarkly::EventProcessorMethods (module)">EventProcessorMethods</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ldclient-rb/events.rb</dd>
  </dl>
  
</div>

<div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(sdk_key, config, client = nil, diagnostic_accumulator = nil, test_properties = nil)  &#x21d2; EventProcessor </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>A new instance of EventProcessor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_custom_event-instance_method" title="#record_custom_event (instance method)">#<strong>record_custom_event</strong>(context, key, data = nil, metric_value = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_eval_event-instance_method" title="#record_eval_event (instance method)">#<strong>record_eval_event</strong>(context, key, version = nil, variation = nil, value = nil, reason = nil, default = nil, track_events = false, debug_until = nil, prereq_of = nil, sampling_ratio = nil, exclude_from_summaries = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_identify_event-instance_method" title="#record_identify_event (instance method)">#<strong>record_identify_event</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_migration_op_event-instance_method" title="#record_migration_op_event (instance method)">#<strong>record_migration_op_event</strong>(event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">#<strong>stop</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait_until_inactive-instance_method" title="#wait_until_inactive (instance method)">#<strong>wait_until_inactive</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>exposed only for testing.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(sdk_key, config, client = nil, diagnostic_accumulator = nil, test_properties = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="LaunchDarkly::EventProcessor (class)">EventProcessor</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns a new instance of EventProcessor.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_sdk_key'>sdk_key</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_accumulator'>diagnostic_accumulator</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_test_properties'>test_properties</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sdk_key must not be nil</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_sdk_key'>sdk_key</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>  <span class='comment'># see LDClient constructor comment on sdk_key
</span>  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span>
  <span class='ivar'>@inbox</span> <span class='op'>=</span> <span class='const'>SizedQueue</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>&lt;</span> <span class='int'>100</span> <span class='op'>?</span> <span class='int'>100</span> <span class='op'>:</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_capacity'>capacity</span><span class='rparen'>)</span>
  <span class='ivar'>@flush_task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_flush_interval'>flush_interval</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="FlushMessage.html" title="LaunchDarkly::FlushMessage (class)">FlushMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@flush_task</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='ivar'>@contexts_flush_task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_context_keys_flush_interval'>context_keys_flush_interval</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="FlushContextsMessage.html" title="LaunchDarkly::FlushContextsMessage (class)">FlushContextsMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@contexts_flush_task</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_diagnostic_accumulator'>diagnostic_accumulator</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_interval'>interval</span> <span class='op'>=</span> <span class='id identifier rubyid_test_properties'>test_properties</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_test_properties'>test_properties</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='symbol'>:diagnostic_recording_interval</span><span class='rparen'>)</span> <span class='op'>?</span>
      <span class='id identifier rubyid_test_properties'>test_properties</span><span class='lbracket'>[</span><span class='symbol'>:diagnostic_recording_interval</span><span class='rbracket'>]</span> <span class='op'>:</span>
      <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_diagnostic_recording_interval'>diagnostic_recording_interval</span>
    <span class='ivar'>@diagnostic_event_task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='id identifier rubyid_interval'>interval</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="DiagnosticEventMessage.html" title="LaunchDarkly::DiagnosticEventMessage (class)">DiagnosticEventMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@diagnostic_event_task</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>else</span>
    <span class='ivar'>@diagnostic_event_task</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='ivar'>@stopped</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>AtomicBoolean</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@inbox_full</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>AtomicBoolean</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_event_sender'>event_sender</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_test_properties'>test_properties</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:event_sender</span><span class='rbracket'>]</span> <span class='op'>||</span>
    <span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/EventSender.html" title="LaunchDarkly::Impl::EventSender (class)">EventSender</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Impl/EventSender.html#initialize-instance_method" title="LaunchDarkly::Impl::EventSender#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sdk_key'>sdk_key</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_client'>client</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/Util.html" title="LaunchDarkly::Impl::Util (module)">Util</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_http_client'><span class='object_link'><a href="Impl/Util.html#new_http_client-class_method" title="LaunchDarkly::Impl::Util.new_http_client (method)">new_http_client</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_events_uri'>events_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='ivar'>@timestamp_fn</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_test_properties'>test_properties</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:timestamp_fn</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/Util.html" title="LaunchDarkly::Impl::Util (module)">Util</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current_time_millis'><span class='object_link'><a href="Impl/Util.html#current_time_millis-class_method" title="LaunchDarkly::Impl::Util.current_time_millis (method)">current_time_millis</a></span></span> <span class='rbrace'>}</span>
  <span class='ivar'>@omit_anonymous_contexts</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_omit_anonymous_contexts'>omit_anonymous_contexts</span>

  <span class='const'><span class='object_link'><a href="EventDispatcher.html" title="LaunchDarkly::EventDispatcher (class)">EventDispatcher</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="EventDispatcher.html#initialize-instance_method" title="LaunchDarkly::EventDispatcher#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@inbox</span><span class='comma'>,</span> <span class='id identifier rubyid_sdk_key'>sdk_key</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_accumulator'>diagnostic_accumulator</span><span class='comma'>,</span> <span class='id identifier rubyid_event_sender'>event_sender</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="flush-instance_method">
  
    #<strong>flush</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush'>flush</span>
  <span class='comment'># flush is done asynchronously
</span>  <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="FlushMessage.html" title="LaunchDarkly::FlushMessage (class)">FlushMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="record_custom_event-instance_method">
  
    #<strong>record_custom_event</strong>(context, key, data = nil, metric_value = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record_custom_event'>record_custom_event</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_metric_value'>metric_value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/CustomEvent.html" title="LaunchDarkly::Impl::CustomEvent (class)">CustomEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Impl/CustomEvent.html#initialize-instance_method" title="LaunchDarkly::Impl::CustomEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_metric_value'>metric_value</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="record_eval_event-instance_method">
  
    #<strong>record_eval_event</strong>(context, key, version = nil, variation = nil, value = nil, reason = nil, default = nil, track_events = false, debug_until = nil, prereq_of = nil, sampling_ratio = nil, exclude_from_summaries = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record_eval_event'>record_eval_event</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_context'>context</span><span class='comma'>,</span>
  <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span>
  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_variation'>variation</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_track_events'>track_events</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='id identifier rubyid_debug_until'>debug_until</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_prereq_of'>prereq_of</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_sampling_ratio'>sampling_ratio</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_exclude_from_summaries'>exclude_from_summaries</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/EvalEvent.html" title="LaunchDarkly::Impl::EvalEvent (class)">EvalEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Impl/EvalEvent.html#initialize-instance_method" title="LaunchDarkly::Impl::EvalEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_variation'>variation</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span>
    <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='id identifier rubyid_track_events'>track_events</span><span class='comma'>,</span> <span class='id identifier rubyid_debug_until'>debug_until</span><span class='comma'>,</span> <span class='id identifier rubyid_prereq_of'>prereq_of</span><span class='comma'>,</span> <span class='id identifier rubyid_sampling_ratio'>sampling_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_exclude_from_summaries'>exclude_from_summaries</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="record_identify_event-instance_method">
  
    #<strong>record_identify_event</strong>(context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record_identify_event'>record_identify_event</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_target_context'>target_context</span> <span class='op'>=</span> <span class='op'>!</span><span class='ivar'>@omit_anonymous_contexts</span> <span class='op'>?</span> <span class='id identifier rubyid_context'>context</span> <span class='op'>:</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_without_anonymous_contexts'>without_anonymous_contexts</span>
  <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../LaunchDarkly.html" title="LaunchDarkly (module)">LaunchDarkly</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl.html" title="LaunchDarkly::Impl (module)">Impl</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Impl/IdentifyEvent.html" title="LaunchDarkly::Impl::IdentifyEvent (class)">IdentifyEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Impl/IdentifyEvent.html#initialize-instance_method" title="LaunchDarkly::Impl::IdentifyEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span> <span class='id identifier rubyid_target_context'>target_context</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_target_context'>target_context</span><span class='period'>.</span><span class='id identifier rubyid_valid?'>valid?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="record_migration_op_event-instance_method">
  
    #<strong>record_migration_op_event</strong>(event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record_migration_op_event'>record_migration_op_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_post_to_inbox'>post_to_inbox</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop-instance_method">
  
    #<strong>stop</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop'>stop</span>
  <span class='comment'># final shutdown, which includes a final flush, is done synchronously
</span>  <span class='kw'>if</span> <span class='ivar'>@stopped</span><span class='period'>.</span><span class='id identifier rubyid_make_true'>make_true</span>
    <span class='ivar'>@flush_task</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span>
    <span class='ivar'>@contexts_flush_task</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span>
    <span class='ivar'>@diagnostic_event_task</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span> <span class='kw'>unless</span> <span class='ivar'>@diagnostic_event_task</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Note that here we are not calling post_to_inbox, because we *do* want to wait if the inbox
</span>    <span class='comment'># is full; an orderly shutdown can&#39;t happen unless these messages are received.
</span>    <span class='ivar'>@inbox</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="FlushMessage.html" title="LaunchDarkly::FlushMessage (class)">FlushMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_stop_msg'>stop_msg</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="StopMessage.html" title="LaunchDarkly::StopMessage (class)">StopMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SynchronousMessage.html#initialize-instance_method" title="LaunchDarkly::SynchronousMessage#initialize (method)">new</a></span></span>
    <span class='ivar'>@inbox</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_stop_msg'>stop_msg</span>
    <span class='id identifier rubyid_stop_msg'>stop_msg</span><span class='period'>.</span><span class='id identifier rubyid_wait_for_completion'>wait_for_completion</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait_until_inactive-instance_method">
  
    #<strong>wait_until_inactive</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>exposed only for testing</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldclient-rb/events.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wait_until_inactive'>wait_until_inactive</span>
  <span class='id identifier rubyid_sync_msg'>sync_msg</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TestSyncMessage.html" title="LaunchDarkly::TestSyncMessage (class)">TestSyncMessage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SynchronousMessage.html#initialize-instance_method" title="LaunchDarkly::SynchronousMessage#initialize (method)">new</a></span></span>
  <span class='ivar'>@inbox</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sync_msg'>sync_msg</span>
  <span class='id identifier rubyid_sync_msg'>sync_msg</span><span class='period'>.</span><span class='id identifier rubyid_wait_for_completion'>wait_for_completion</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan 20 18:49:28 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.2.10).
</div>

    </div>
  </body>
</html>